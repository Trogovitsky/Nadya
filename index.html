<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è!</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1: #0f172a;
      --glass: rgba(255,255,255,0.08);
      --accent: linear-gradient(135deg, rgba(255,120,183,0.95), rgba(130,94,255,0.95));
      --card-r: 20px;
      --glass-border: rgba(255,255,255,0.12);
      --text: #f8fafc;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}

    body{
      background: radial-gradient(1200px 600px at 10% 10%, rgba(130,94,255,0.12), transparent),
                  radial-gradient(900px 400px at 90% 90%, rgba(255,120,183,0.08), transparent),
                  var(--bg1);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
    }

    /* animated shimmer overlay */
    .auras{position:fixed;inset:0;pointer-events:none;mix-blend-mode:screen}
    .aura{position:absolute;border-radius:50%;filter:blur(120px);opacity:0.9}
    .a1{left:5%;top:10%;width:520px;height:520px;background:radial-gradient(circle,#7e5eff 0%, transparent 60%)}
    .a2{right:5%;bottom:5%;width:420px;height:420px;background:radial-gradient(circle,#ff78b7 0%, transparent 60%)}

    /* floating shapes */
    .float-wrap{position:fixed;inset:0;z-index:0;pointer-events:none}
    .bubble{position:absolute;border-radius:50%;background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));box-shadow:0 6px 30px rgba(2,6,23,0.5);backdrop-filter: blur(8px);animation:float 10s ease-in-out infinite}
    .b1{width:120px;height:120px;left:6%;top:40%;animation-duration:14s}
    .b2{width:80px;height:80px;right:10%;top:20%;animation-duration:10s}
    .b3{width:160px;height:160px;left:70%;top:65%;animation-duration:18s}
    @keyframes float{0%{transform:translateY(0) translateX(0)}50%{transform:translateY(-28px) translateX(12px)}100%{transform:translateY(0) translateX(0)}}

    /* center card */
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:48px;position:relative;z-index:2}
    .card{
      width:min(920px,96%);
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:var(--card-r);
      padding:36px;
      display:grid;grid-template-columns:1fr 380px;gap:24px;align-items:center;
      box-shadow:0 8px 30px rgba(2,6,23,0.6);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(12px) saturate(120%);
      -webkit-backdrop-filter: blur(12px) saturate(120%);
    }

    .message{padding:18px}
    .title{font-size:2.1rem;margin:0 0 8px 0;font-weight:800;letter-spacing:-0.02em}
    .subtitle{margin:0 0 18px 0;font-weight:500;opacity:0.95}
    .quote{font-size:1rem;line-height:1.5;background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));padding:14px;border-radius:12px}

    .right-panel{display:flex;flex-direction:column;gap:14px;align-items:center;justify-content:center}
    .photo{
      width:100%;height:260px;border-radius:16px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.05);
    }
    .photo img{width:100%;height:100%;object-fit:cover}

    .controls{display:flex;gap:10px;align-items:center}
    .btn{appearance:none;border:0;padding:10px 14px;border-radius:12px;background:linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));color:var(--text);cursor:pointer;font-weight:600}
    .btn.accent{background:var(--accent);color:#fff;box-shadow:0 8px 30px rgba(130,94,255,0.16)}

    .footer{display:flex;gap:12px;align-items:center;font-size:0.9rem;margin-top:8px;opacity:0.95}

    /* confetti canvas occupies full viewport */
    #confettiCanvas{position:fixed;inset:0;pointer-events:none;z-index:3}

    /* mobile */
    @media (max-width:820px){
      .card{grid-template-columns:1fr; padding:20px}
      .right-panel{order:-1}
      .photo{height:200px}
      .title{font-size:1.6rem}
    }

    /* small touches */
    .sparkles{position:absolute;right:18px;top:18px;display:flex;gap:8px}
    .spark{width:10px;height:10px;border-radius:50%;background:radial-gradient(circle,#fff,#ffd3f0);filter:blur(6px);opacity:0.9;animation:pop 1.8s infinite}
    .spark:nth-child(2){animation-delay:.4s}
    .spark:nth-child(3){animation-delay:.8s}
    @keyframes pop{0%{transform:scale(.7);opacity:.6}50%{transform:scale(1.6);opacity:1}100%{transform:scale(.7);opacity:.6}}

    .name-highlight{display:inline-block;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));font-weight:700}

    a{color:inherit}
  </style>
</head>
<body>
  <div class="auras" aria-hidden="true">
    <div class="aura a1"></div>
    <div class="aura a2"></div>
  </div>

  <div class="float-wrap" aria-hidden="true">
    <div class="bubble b1"></div>
    <div class="bubble b2"></div>
    <div class="bubble b3"></div>
  </div>

  <canvas id="confettiCanvas"></canvas>

  <main class="wrap">
    <section class="card" role="article" aria-label="–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ">
      <div class="message">
        <div class="sparkles" aria-hidden="true">
          <div class="spark"></div>
          <div class="spark"></div>
          <div class="spark"></div>
        </div>
        <h1 class="title">–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, <span class="name-highlight" id="girlName">‚ù§Ô∏è–ù–∞–¥—è‚ù§Ô∏è</span></h1>
        <p class="subtitle">—ç—Ç–æ –æ—Ç —Ç–≤–æ–µ–≥–æ –∫—Ä—É—Ç–æ–≥–æ –∫–∞—á–∫–∞ –∏ –¥–µ—Ç—Å–∫–æ–≥–æ —Å–∞–¥–∞</p>

        <div class="quote" id="mainWish">
          –¢—ã —Å–ª–∏—à–∫–æ–º –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞, –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤–∞—è –∏ –∫—Ä—É—Ç–æ —Ç–∞–Ω—Ü—É–µ—à—å. –ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è)
        </div>

        <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap;">
          <button class="btn accent" id="surpriseBtn">–ú—è—É</button>
        </div>

        <div class="footer">
          <small>–ù–∞–∂–º–∏ "‚ñ∂"</small>
        </div>
      </div>

      <aside class="right-panel">
        <div class="photo" aria-hidden="true">
          <img id="photoImg" src="nadya.png" alt="–§–æ—Ç–æ">
        </div>

        <div class="controls" role="region" aria-label="–ú–µ–¥–∏–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ">
          <button class="btn" id="playBtn">‚ñ∂ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É</button>
          <button class="btn" id="pauseBtn">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
        </div>

      </aside>
    </section>
  </main>

  <!-- audio (replace src with your song) -->
  <audio id="bgMusic" loop preload="auto">
    <source src="music.mp3" type="audio/mp3">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
  </audio>

  <script>
    // --- small helpers ---
    const bg = document.getElementById('bgMusic');
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const surpriseBtn = document.getElementById('surpriseBtn');
    const toggleTheme = document.getElementById('toggleTheme');
    const editBtn = document.getElementById('editBtn');
    const girlName = document.getElementById('girlName');
    const mainWish = document.getElementById('mainWish');
    const photoImg = document.getElementById('photoImg');

    playBtn.addEventListener('click', async ()=>{
      try{await bg.play(); playBtn.textContent='üéµ –ú—É–∑—ã–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞';}
      catch(e){alert('–í–∫–ª—é—á–µ–Ω–∏–µ –º—É–∑—ã–∫–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ ‚Äî –Ω–∞–∂–º–∏ –µ—â—ë —Ä–∞–∑.');}
    });
    pauseBtn.addEventListener('click', ()=>{bg.pause(); playBtn.textContent='‚ñ∂ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É';});

    // confetti
    const canvas = document.getElementById('confettiCanvas');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = innerWidth;
    let H = canvas.height = innerHeight;
    const confetti = [];
    function onResize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight}
    addEventListener('resize', onResize);

    function rand(min,max){return Math.random()*(max-min)+min}
    function makeConfetti(x,y){
      for(let i=0;i<90;i++){
        confetti.push({x,y,r:rand(6,12),vx:rand(-8,8),vy:rand(-12,-2),gravity:rand(0.2,0.8),angle:rand(0,Math.PI*2),spin:rand(-0.12,0.12),c:['#ff6b6b','#ffd166','#6bcB77','#9b5cff'][Math.floor(rand(0,4))]});
      }
      if(confetti.length>1200) confetti.splice(0, confetti.length-1200);
    }
    function updateConfetti(){ctx.clearRect(0,0,W,H);for(let i=0;i<confetti.length;i++){let p=confetti[i];p.vy+=p.gravity;p.x+=p.vx;p.y+=p.vy;p.angle+=p.spin;ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.angle);ctx.fillStyle=p.c;ctx.fillRect(-p.r/2,-p.r/2,p.r,p.r*0.6);ctx.restore();if(p.y>H+40){confetti.splice(i,1);i--;}}requestAnimationFrame(updateConfetti)}
    updateConfetti();

    surpriseBtn.addEventListener('click', (e)=>{const x=innerWidth/2;const y=innerHeight/3;makeConfetti(x,y);});

    // theme switch ‚Äî toggles accent colors
    let alt=false;
    toggleTheme.addEventListener('click', ()=>{
      alt = !alt;
      if(alt){document.documentElement.style.setProperty('--accent','linear-gradient(135deg, rgba(255,200,120,0.95), rgba(130,200,255,0.95))');}
      else{document.documentElement.style.setProperty('--accent','linear-gradient(135deg, rgba(255,120,183,0.95), rgba(130,94,255,0.95))');}
    });

    // edit flow ‚Äî quick prompt-based edits
    editBtn.addEventListener('click', ()=>{
      const name = prompt('–ò–º—è (–∫–æ—Ä–æ—Ç–∫–æ)', girlName.textContent) || girlName.textContent;
      const wish = prompt('–ü–æ–∂–µ–ª–∞–Ω–∏–µ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π)', mainWish.textContent) || mainWish.textContent;
      const photo = prompt('–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ (–æ—Å—Ç–∞–≤—å, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å)', photoImg.src) || photoImg.src;
      const music = prompt('–°—Å—ã–ª–∫–∞ –Ω–∞ –º—É–∑—ã–∫—É (mp3) (–æ—Å—Ç–∞–≤—å, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å)', bg.querySelector('source').src) || bg.querySelector('source').src;
      girlName.textContent = name;
      mainWish.textContent = wish;
      photoImg.src = photo;
      // swap audio source safely
      const s = bg.querySelector('source');
      if(music !== s.src){s.src = music; bg.load();}
      // small confetti as feedback
      makeConfetti(innerWidth/2, innerHeight/3);
    });

    // download current HTML ‚Äî serializes minimal version
    document.getElementById('downloadBtn').addEventListener('click', (ev)=>{
      ev.preventDefault();
      const markup = `<!doctype html>\n<html lang=\"ru\">\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n<title>–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è!</title>\n<!-- –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è: –æ—Ç–∫—Ä–æ–π –ª–æ–∫–∞–ª—å–Ω–æ -->\n<div style=\"padding:24px;font-family:Inter,system-ui;\">–û—Ç–∫—Ä–æ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ–ø—ã—Ç–∞.</div>`;
      const blob = new Blob([markup],{type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'birthday-card.html'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    // accessibility: keyboard trigger for confetti (Enter on button)
    surpriseBtn.addEventListener('keyup',(e)=>{if(e.key==='Enter') surpriseBtn.click()});

    // small guide: if autoplay blocked, show hint
    window.addEventListener('load', ()=>{
      setTimeout(()=>{
        if(bg.paused){playBtn.style.boxShadow='0 6px 20px rgba(0,0,0,0.4)';}
      },900);
    });

    // prevent mobile browsers from spamming audio play attempts
    let userInteracted=false;
    ['touchstart','click','keydown'].forEach(ev=>{addEventListener(ev,()=>{userInteracted=true},{once:true})});

  </script>
</body>
</html>
